<alert-bs [type]="formAttributeSettings.alertType" [dismissable]="formAttributeSettings.dismissable">
  {{formAttributeSettings.msg}}
</alert-bs>

<form class="form-horizontal" [formGroup]="userForm" (ngSubmit)="onSubmit($event)">
  <input formControlName="id" type="hidden"/>
  <div class="box-body">
    <div class="form-group">
      <label for="user-userName" class="col-sm-3 control-label">Username</label>

      <div class="col-sm-6">
        <input type="text" formControlName="userName" class="form-control" id="user-userName" placeholder="Username">
      </div>
      <div class="col-sm-3"></div>
    </div>
    <div class="form-group">
      <label for="user-password" class="col-sm-3 control-label">Password</label>

      <div class="col-sm-6">
        <input type="password" formControlName="password" class="form-control" id="user-password"
               placeholder="Password">
      </div>
      <div class="col-sm-3"></div>
    </div>
    <div class="form-group">
      <label for="user-email" class="col-sm-3 control-label">Email</label>

      <div class="col-sm-6">
        <input type="text" formControlName="email" class="form-control" id="user-email" placeholder="Email">
      </div>
      <div class="col-sm-3"></div>
    </div>
    <div class="form-group">
      <label for="user-firstName" class="col-sm-3 control-label">First Name</label>

      <div class="col-sm-6">
        <input type="text" formControlName="firstName" class="form-control" id="user-firstName"
               placeholder="First Name">
      </div>
      <div class="col-sm-3"></div>
    </div>
    <div class="form-group">
      <label for="user-lastName" class="col-sm-3 control-label">Last Name</label>

      <div class="col-sm-6">
        <input type="text" formControlName="lastName" class="form-control" id="user-lastName" placeholder="Last Name">
      </div>
      <div class="col-sm-3"></div>
    </div>
    <div class="form-group">
      <label for="user-phone" class="col-sm-3 control-label">Land Line</label>

      <div class="col-sm-6">
        <input type="text" formControlName="phone" class="form-control" id="user-phone" placeholder="Land Line">
      </div>
      <div class="col-sm-3"></div>
    </div>
    <div class="form-group">
      <label for="user-mobile" class="col-sm-3 control-label">Mobile Number</label>

      <div class="col-sm-6">
        <input type="text" formControlName="mobile" class="form-control" id="user-mobile" placeholder="Mobile Number">
      </div>
      <div class="col-sm-3"></div>
    </div>
    <div class="form-group">
      <label for="user-dob" class="col-sm-3 control-label">Date of Birth</label>
      <div class="col-sm-6">
        <!--<ng2bs-datepicker><input #dob value="" type="text" class="form-control ng-datepicker" formControlName="dateOfBirth" placeholder="Date of birth" id="user-dob" (change)="onBlur($event,dob.value)"></ng2bs-datepicker>-->
        <!--<ng2bs-datepicker #userDob (blur) = "onBlur(userDob.value)"></ng2bs-datepicker>-->
        <ng2bs-datepicker>
          <div class="input-group date">
            <!--<input #dob type="text" class="form-control" formControlName="dateOfBirth" placeholder="Date of birth" id="user-dob" (blur)="onDateClick()">-->

            <input
              #dob
              class="form-control"
              type="text"
              formControlName="dateOfBirth"
              ng2-datetime-picker
              date-only="true"
              date-format="YYYY-MM-DD"
              placeholder="Date of birth"
              [close-on-select]="true"
              id="user-dob"
            />
            <div class="input-group-addon" (click)="dob.focus()">
              <i class="fa fa-calendar pull-right"></i>
            </div>
          </div>
        </ng2bs-datepicker>
        <!--<my-date-picker [options]="myDatePickerOptions"-->
        <!--formControlName="dateOfBirth"></my-date-picker>-->

      </div>

      <div class="col-sm-3"></div>
    </div>
    <div class="form-group">
      <label for="user-designation" class="col-sm-3 control-label">Designation</label>

      <div class="col-sm-6">
        <input type="text" formControlName="designation" class="form-control" id="user-designation"
               placeholder="Designation">
      </div>
      <div class="col-sm-3"></div>
    </div>
    <div class="form-group">
      <label for="user-address" class="col-sm-3 control-label">Address</label>

      <div class="col-sm-6">
        <textarea class="form-control" formControlName="address" rows="3" id="user-address"
                  placeholder="Address"></textarea>
      </div>
      <div class="col-sm-3"></div>
    </div>
  </div>
  <!-- /.box-body -->

  <div class="box-footer">
    <div class="col-sm-9">
      <button type="submit" [disabled]="!userForm.valid" class="btn btn-primary btn-flat pull-right">
        {{formAttributeSettings.buttonName}}
      </button>

      <button *ngIf="formAttributeSettings.buttonName==='Update'" (click)="onAddNewBtnClk()"
              [disabled]="formAttributeSettings.buttonName==='Submit'" type="button"
              class="btn btn-success btn-flat pull-right margin-r-5"><i class="fa fa-plus"></i> Add New
      </button>
    </div>
    <div class="col-sm-3"></div>
  </div>
</form>

<modal #uploadModal [keyboard]="false" [backdrop]="'static'" [size]="'lg'">
  <modal-header [show-close]="false">
    <h3 class="modal-title">Upload User Image</h3>
  </modal-header>
  <modal-body>


    <div class="box-body">
      <div class="row">
        <div class="col-sm-12">
          <h4>Image File</h4>
          <input type="file" id="exampleInputFile" (change)="fileChangeListener($event)">
          <p class="help-block">Choose image of user.</p>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-6">
          <h4>Adjust Image</h4>
          <img-cropper #cropper [image]="data" [settings]="cropperSettings"></img-cropper>
        </div>
        <div class="col-sm-6 pull-left">
          <h4>Preview</h4>
          <img *ngIf="data.image"  [src]="data.image" [width]="cropperSettings.croppedWidth" [height]="cropperSettings.croppedHeight">
        </div>
      </div>
    </div>

  </modal-body>
  <modal-footer>
    <button type="button" class="btn btn-default btn-flat" data-dismiss="modal" (click)="closeModal()">
      Skip
    </button>
    <button (click)="onUpload(data.image)" [disabled]="!data.image" type="button" class="btn btn-primary btn-flat">Upload</button>
  </modal-footer>
</modal>
